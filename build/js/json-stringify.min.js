document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("json-input"),e=document.getElementById("json-output"),n=document.getElementById("stringify-btn"),s=document.getElementById("download-json"),a=document.getElementById("copy-json"),c=document.getElementById("pretty-print"),o=document.getElementById("indent"),r=document.getElementById("sample-data"),i=document.getElementById("clear-input"),d=document.querySelector(".line-numbers"),l=document.getElementById("input-char-count"),u=document.getElementById("output-char-count"),m=document.getElementById("input-status"),p=document.getElementById("output-status"),y={id:1,name:"Sample Object",active:!0,values:[1,2,3],nested:{key:"value",empty:null},date:(new Date).toISOString()};function g(){if(!d)return;const e=t.value.split("\n");d.innerHTML=e.map((t,e)=>e+1).join("<br>"),d.scrollTop=t.scrollTop}function E(){l&&(l.textContent=`${t.value.length} characters`),u&&(u.textContent=`${e.textContent.length} characters`)}function f(){try{if(""===t.value.trim())return m.textContent="Empty",void(m.className="status-indicator");JSON.parse(t.value),m.textContent="Valid JSON",m.className="status-indicator success"}catch(t){m.textContent=`Invalid JSON: ${t.message}`,m.className="status-indicator error"}}r&&r.addEventListener("click",()=>{t.value=JSON.stringify(y,null,2),g(),E(),f()}),i&&i.addEventListener("click",()=>{t.value="",e.textContent="Stringified JSON will appear here...",g(),E(),m.textContent="Valid JSON",m.className="status-indicator"}),t?.addEventListener("scroll",()=>{d&&(d.scrollTop=t.scrollTop)}),n?.addEventListener("click",()=>{const n=function(t){if("\\t"===t)return"\t";const e=parseInt(t,10);return isNaN(e)?2:e}(o?.value||"2"),s=function(t,e=!0,n=2){try{const s="string"==typeof t?JSON.parse(t):t;return e?JSON.stringify(s,null,n):JSON.stringify(s)}catch(t){return`Error: ${t.message}`}}(t.value,c.checked,n);e.textContent=s,p.textContent="Stringified successfully",p.className="status-indicator success",E()}),s?.addEventListener("click",()=>{const t=e.textContent;if(!t||t.startsWith("Error:"))return;const n=new Blob([t],{type:"application/json;charset=utf-8;"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download="data.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),p.textContent="File downloaded",p.className="status-indicator success"}),a?.addEventListener("click",()=>{const t=e.textContent;t&&!t.startsWith("Error:")&&navigator.clipboard.writeText(t).then(()=>{const t=a.querySelector("i");t&&(t.classList.replace("far","fas"),setTimeout(()=>t.classList.replace("fas","far"),2e3)),p.textContent="Copied to clipboard",p.className="status-indicator success"}).catch(t=>{p.textContent="Copy failed: "+t.message,p.className="status-indicator error"})}),t?.addEventListener("input",()=>{g(),E(),f()}),g(),E(),f()});