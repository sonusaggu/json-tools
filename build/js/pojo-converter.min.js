document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("jsonInput"),t=document.getElementById("charCount"),n=document.getElementById("pojoOutput"),r=document.getElementById("sampleBtn"),o=document.getElementById("convertBtn"),c=document.getElementById("clearBtn"),a=document.getElementById("copyBtn"),i=document.getElementById("targetLanguage"),s=document.getElementById("inputLineNumbers");function l(){const t=e.value.split("\n").length;s.innerHTML=Array.from({length:t},(e,t)=>t+1).join("<br>"),s.scrollTop=e.scrollTop}e.addEventListener("input",()=>{l(),t&&(t.textContent=`${e.value.length} characters`)}),e.addEventListener("scroll",()=>{s.scrollTop=e.scrollTop}),window.addEventListener("resize",()=>{s.scrollTop=e.scrollTop});const d={user:{id:12345,name:"John Doe",email:"john.doe@example.com",active:!0,roles:["admin","user"],profile:{age:30,address:{street:"123 Main St",city:"New York",coordinates:[40.7128,-74.006]}},orders:[{orderId:"ORD-1001",items:[{productId:"P100",quantity:2,price:19.99}],total:39.98}]},metadata:{createdAt:"2023-01-01T00:00:00Z",updatedAt:null}};function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t,n){e&&"object"==typeof e&&!n[t]&&(n[t]={},Object.entries(e).forEach(([e,r])=>{if(r&&"object"==typeof r&&!Array.isArray(r)){const o=t+u(e);n[t][e]=o,p(r,o,n)}else if(Array.isArray(r)&&r.length&&"object"==typeof r[0]){const o=t+u(e.replace(/s$/,""));n[t][e]=`List<${o}>`,p(r[0],o,n)}else n[t][e]=f(r)}))}function y(e,t){let n=`public class ${e} {\n`;return Object.entries(t).forEach(([e,t])=>{n+=`    private ${t} ${e};\n`}),n+=`\n    public ${e}() {}\n\n    public ${e}(${Object.entries(t).map(([e,t])=>`${t} ${e}`).join(", ")}) {\n`,Object.keys(t).forEach(e=>{n+=`        this.${e} = ${e};\n`}),n+="    }\n",Object.entries(t).forEach(([e,t])=>{const r=u(e);n+=`\n    public ${t} get${r}() { return ${e}; }\n    public void set${r}(${t} ${e}) { this.${e} = ${e}; }\n`}),n+=`\n    @Override\n    public String toString() {\n        return "${e}{" +\n`,n+=Object.keys(t).map(e=>`            "${e}=" + ${e}`).join(' + ", " +\n')+"\n        ;\n    }\n}",n}function f(e){return null===e?"Object":Array.isArray(e)?e.length?`List<${f(e[0])}>`:"List<Object>":"object"==typeof e?"Object":"string"==typeof e?"String":"boolean"==typeof e?"boolean":"number"==typeof e?Number.isInteger(e)?"int":"double":"Object"}function b(e,t,n){e&&"object"==typeof e&&!n[t]&&(n[t]={},Object.entries(e).forEach(([e,r])=>{if(r&&"object"==typeof r&&!Array.isArray(r)){const o=t+u(e);n[t][e]=o,b(r,o,n)}else if(Array.isArray(r)&&r.length&&"object"==typeof r[0]){const o=t+u(e.replace(/s$/,""));n[t][e]=`List[${o}]`,b(r[0],o,n)}else n[t][e]=$(r)}))}function m(e,t){let n=`@dataclass\nclass ${e}:\n`;return Object.entries(t).forEach(([e,t])=>{n+=`    ${e}: ${t}\n`}),n}function $(e){return null===e?"Optional[Any]":void 0===e?"Any":Array.isArray(e)?e.length?`List[${$(e[0])}]`:"List[Any]":"object"==typeof e?"Any":"string"==typeof e&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+\-]\d{2}:\d{2})?$/.test(e)?"datetime":"string"==typeof e?"str":"boolean"==typeof e?"bool":"number"==typeof e?e%1!=0?"float":"int":"Any"}function h(e,t,n){e&&"object"==typeof e&&!n[t]&&(n[t]={},Object.entries(e).forEach(([e,r])=>{if(r&&"object"==typeof r&&!Array.isArray(r)){const o=t+u(e);n[t][e]=o,h(r,o,n)}else if(Array.isArray(r)&&r.length&&"object"==typeof r[0]){const o=t+u(e.replace(/s$/,""));n[t][e]=`${o}[]`,h(r[0],o,n)}else n[t][e]=g(r)}))}function j(e,t){let n=`interface ${e} {\n`;return Object.entries(t).forEach(([e,t])=>{n+=`    ${e}: ${t};\n`}),n+"}"}function g(e){return null===e?"null":void 0===e?"undefined":Array.isArray(e)?e.length?`${g(e[0])}[]`:"any[]":"object"==typeof e?"any":"string"==typeof e&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+\-]\d{2}:\d{2})?$/.test(e)?"Date | string":"string"==typeof e?"string":"boolean"==typeof e?"boolean":"number"==typeof e?"number":"any"}function A(e,t,n){e&&"object"==typeof e&&!n[t]&&(n[t]={},Object.entries(e).forEach(([e,r])=>{if(r&&"object"==typeof r&&!Array.isArray(r)){const o=t+u(e);n[t][e]=o,A(r,o,n)}else if(Array.isArray(r)&&r.length&&"object"==typeof r[0]){const o=t+u(e.replace(/s$/,""));n[t][e]=`${o}[]`,A(r[0],o,n)}else n[t][e]=E(r)}))}function O(e,t){let n=`class ${e} {\n  constructor(data = {}) {\n`;return Object.entries(t).forEach(([e,t])=>{if(t.endsWith("[]")){const r=t.slice(0,-2);n+=`    this.${e} = (data.${e} || []).map(item => new ${r}(item));\n`}else/^[A-Z]/.test(t)?n+=`    this.${e} = data.${e} ? new ${t}(data.${e}) : null;\n`:n+=`    this.${e} = data.${e} || ${function(e){return{string:"''",number:"0",boolean:"false",Array:"[]",object:"{}",null:"null",undefined:"undefined"}[e]||"null"}(t)};\n`}),n+="  }\n\n  toJSON() {\n    return {",n+=Object.keys(t).map(e=>`${e}: this.${e}${/^[A-Z]/.test(t[e])&&!t[e].endsWith("[]")?"?.toJSON()":""}`).join(", "),n+="};\n  }\n}",n}function E(e){return null===e?"null":void 0===e?"undefined":Array.isArray(e)?e.length?`${E(e[0])}[]`:"Array":"object"==typeof e?"object":"string"==typeof e?"string":"boolean"==typeof e?"boolean":"number"==typeof e?"number":"any"}r.addEventListener("click",()=>{e.value=JSON.stringify(d,null,2),t.textContent=`${e.value.length} characters`,n.textContent="Click Convert to generate POJO"}),l(),c.addEventListener("click",()=>{e.value="",t.textContent="0 characters",n.textContent="Converted POJO will appear here..."}),l(),o.addEventListener("click",()=>{try{if(!e.value.trim())throw new Error("Input is empty");const t=function(e,t){if(!e||"object"!=typeof e)throw new Error("Invalid JSON data");const n={java:"Root",python:"RootModel",typescript:"IRoot",javascript:"Root"}[t]||"Root";switch(t){case"java":return function(e,t){const n={};p(e,t,n);let r="";return Object.entries(n).forEach(([e,n])=>{e!==t&&(r+=y(e,n||{})+"\n\n")}),r+=y(t,n[t]||{}),r}(e,n);case"python":return function(e,t){const n={};b(e,t,n);let r="from dataclasses import dataclass\nfrom typing import List, Optional, Any\nfrom datetime import datetime\n\n";return Object.entries(n).forEach(([e,n])=>{e!==t&&(r+=m(e,n||{})+"\n\n")}),r+=m(t,n[t]||{}),r}(e,n);case"typescript":return function(e,t){const n={};h(e,t,n);let r="";return Object.entries(n).forEach(([e,n])=>{e!==t&&(r+=j(e,n||{})+"\n\n")}),r+=j(t,n[t]||{}),r}(e,n);case"javascript":return function(e,t){const n={};A(e,t,n);let r="";return Object.entries(n).forEach(([e,n])=>{e!==t&&(r+=O(e,n||{})+"\n\n")}),r+=O(t,n[t]||{}),r}(e,n);default:throw new Error("Unsupported language")}}(JSON.parse(e.value),i.value);n.textContent=t}catch(e){n.innerHTML=`<span class="error">âœ— ${e.message}</span>`,console.error(e)}}),a.addEventListener("click",()=>{const e=n.textContent;e&&!e.includes("Click Convert")&&navigator.clipboard.writeText(e).then(()=>{const e=document.createElement("span");e.textContent="Copied!",e.style.marginLeft="10px",e.style.color="#28a745",a.parentNode.appendChild(e),setTimeout(()=>e.remove(),2e3)}).catch(()=>{console.error("Copy failed")})})});