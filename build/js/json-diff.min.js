document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("json-input1"),t=document.getElementById("json-input2"),n=document.getElementById("diff-output"),r=document.getElementById("compare-btn"),i=document.getElementById("clear-all-btn"),o=document.getElementById("clear1-btn"),c=document.getElementById("clear2-btn"),d=document.getElementById("sample1-btn"),a=document.getElementById("sample2-btn"),s=document.getElementById("char-count1"),l=document.getElementById("char-count2"),u=document.getElementById("diff-count"),f=document.getElementById("line-numbers1"),v=document.getElementById("line-numbers2"),p={name:"Product API",version:"1.0.0",description:"API for product management",endpoints:{products:"/api/products",categories:"/api/categories"},settings:{cache:!0,limit:100},tags:["api","products","v1"]},m={name:"Product API",version:"1.1.0",description:"API for product and inventory management",endpoints:{products:"/api/products",categories:"/api/categories",inventory:"/api/inventory"},settings:{cache:!1,limit:50,timeout:30},tags:["api","products","v2"],newFeature:!0};function g(e,t,n){h(e,t),n.textContent=`${e.value.length} characters`,e.addEventListener("input",()=>{h(e,t),n.textContent=`${e.value.length} characters`}),e.addEventListener("scroll",()=>{t.scrollTop=e.scrollTop})}function h(e,t){const n=e.value.split("\n");t.innerHTML=n.map((e,t)=>t+1).join("<br>")}function y(e,t,n=""){const r=[];if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return E(e,t)||r.push({path:n||"root",value1:e,value2:t,type:"changed"}),r;const i=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of i){const i=n?`${n}.${o}`:o;o in e?o in t?E(e[o],t[o])||("object"==typeof e[o]&&"object"==typeof t[o]&&null!==e[o]&&null!==t[o]?r.push(...y(e[o],t[o],i)):r.push({path:i,value1:e[o],value2:t[o],type:"changed"})):r.push({path:i,value1:e[o],value2:void 0,type:"removed"}):r.push({path:i,value1:void 0,value2:t[o],type:"added"})}return r}function E(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(!r.includes(i)||!E(e[i],t[i]))return!1;return!0}function b(e){return void 0===e?"undefined":null===e?"null":"object"==typeof e?JSON.stringify(e):e.toString()}g(e,f,s),g(t,v,l),d.addEventListener("click",()=>{e.value=JSON.stringify(p,null,2),h(e,f),s.textContent=`${e.value.length} characters`}),a.addEventListener("click",()=>{t.value=JSON.stringify(m,null,2),h(t,v),l.textContent=`${t.value.length} characters`}),o.addEventListener("click",()=>{e.value="",h(e,f),s.textContent="0 characters"}),c.addEventListener("click",()=>{t.value="",h(t,v),l.textContent="0 characters"}),i.addEventListener("click",()=>{e.value="",t.value="",n.innerHTML="Comparison results will appear here...",u.textContent="0 differences",h(e,f),h(t,v),s.textContent="0 characters",l.textContent="0 characters"}),r.addEventListener("click",()=>{try{const r=e.value?JSON.parse(e.value):{},i=y(r,t.value?JSON.parse(t.value):{});!function(e){if(0===e.length)return void(n.innerHTML='<div class="valid">âœ“ No differences found</div>');let t='<div class="diff-summary">Found '+e.length+" differences:</div>";const r=e.filter(e=>"added"===e.type),i=e.filter(e=>"removed"===e.type),o=e.filter(e=>"changed"===e.type);i.length>0&&(t+='<div class="diff-section"><h3>Removed Properties</h3>',i.forEach(e=>{t+=`<div class="diff-item diff-removed">\n                    <strong>${e.path}</strong>: ${b(e.value1)}\n                </div>`}),t+="</div>");r.length>0&&(t+='<div class="diff-section"><h3>Added Properties</h3>',r.forEach(e=>{t+=`<div class="diff-item diff-added">\n                    <strong>${e.path}</strong>: ${b(e.value2)}\n                </div>`}),t+="</div>");o.length>0&&(t+='<div class="diff-section"><h3>Changed Properties</h3>',o.forEach(e=>{t+=`<div class="diff-item diff-changed">\n                    <strong>${e.path}</strong><br>\n                    <span class="diff-marker">-</span> ${b(e.value1)}<br>\n                    <span class="diff-marker">+</span> ${b(e.value2)}\n                </div>`}),t+="</div>");n.innerHTML=t}(i),u.textContent=`${i.length} differences`}catch(e){n.innerHTML=`<div class="error">Error: ${e.message}</div>`,u.textContent="0 differences"}})});